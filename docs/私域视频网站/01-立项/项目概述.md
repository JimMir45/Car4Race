# 项目概述

## 1. 项目背景

### 1.1 问题陈述

作为技术学习者和内容创作者，面临以下痛点：

1. **学习笔记分散**：笔记散落在各处（本地文件、云笔记、博客），缺乏统一管理
2. **知识变现困难**：有优质的视频课程内容，但缺少简单的付费分发渠道
3. **平台依赖性强**：第三方平台（知识星球、小报童等）抽成高、规则多、数据不可控

### 1.2 解决方案

搭建一个**轻量级私域网站**，实现：
- 学习笔记统一展示，建立个人知识库
- 付费课程自主销售，无平台抽成
- 数据完全自主可控
- 会员体系激励用户长期消费

## 2. 项目目标

### 2.1 业务目标

| 目标 | 描述 | 衡量标准 |
|-----|------|---------|
| 知识沉淀 | 将个人学习笔记系统化整理 | 笔记分类清晰、可检索 |
| 内容变现 | 付费课程可直接销售 | 支付流程顺畅、下载正常 |
| 用户留存 | 通过会员体系提升复购 | 会员转化率、续费率 |
| 低成本运营 | 最小化运维投入 | 单容器部署、无人工干预 |

### 2.2 技术目标

- **部署方式**：单 Docker 容器，一键启动
- **运维成本**：接近零运维（静态文件 + SQLite）
- **安全防护**：访问频率限制、游客排队机制
- **扩展性**：预留第三方支付接口

## 3. 项目范围

### 3.1 MVP 范围（本期）

**包含**：
- [x] 笔记列表与详情展示（游客可浏览）
- [x] 用户注册（手机号+验证码，用户名自动生成）
- [x] 课程列表（支持多种排序方式）
- [x] 支付系统（第三方支付预留 + 邀请码）
- [x] 个人中心（订单、浏览记录、下载记录）
- [x] 会员体系（年消费满2000元获全站权限）
- [x] 安全防护（访问频率限制、游客排队）

**不包含**：
- [ ] 在线视频播放
- [ ] 评论互动功能
- [ ] 多语言支持
- [ ] 移动端 App
- [ ] 第三方登录（微信、QQ等）

### 3.2 后续迭代（规划）

| 版本 | 功能 | 说明 |
|-----|------|-----|
| v1.1 | 搜索功能 | 笔记全文搜索 |
| v1.2 | 第三方支付 | 接入微信/支付宝支付 |
| v1.3 | 数据分析 | 详细的访问统计报表 |

## 4. 核心概念

### 4.1 用户角色

```
┌─────────────────────────────────────────────────────────────┐
│                        用户角色                              │
├──────────────┬──────────────┬──────────────┬────────────────┤
│    游客       │   注册用户    │    会员      │     站长       │
├──────────────┼──────────────┼──────────────┼────────────────┤
│ • 浏览笔记    │ • 游客权限    │ • 用户权限    │ • 所有权限     │
│ • 查看课程    │ • 付费下载    │ • 全站下载    │ • 内容管理     │
│ • IP排队限制  │ • 频率限制    │ • 频率限制    │ • 邀请码管理   │
│              │ • 个人中心    │ • 有效期1年   │ • 订单管理     │
└──────────────┴──────────────┴──────────────┴────────────────┘
```

### 4.2 内容类型

```
┌─────────────────────────────────────────────┐
│                  网站内容                    │
├──────────────────┬──────────────────────────┤
│     免费内容      │       付费内容            │
├──────────────────┼──────────────────────────┤
│  • 学习笔记       │  • 视频课程压缩包         │
│  • Markdown格式  │  • 站长定价              │
│  • 游客可浏览     │  • 第三方支付或邀请码     │
│  • 下载需注册     │  • 会员可免费下载        │
└──────────────────┴──────────────────────────┘
```

### 4.3 用户旅程

```
游客 → 浏览笔记 → 想下载 → 手机注册 → 成为用户
                              ↓
用户 → 浏览课程 → 付费/邀请码 → 下载课程
                              ↓
         年消费满2000元（不含邀请码）
                              ↓
会员 → 全站下载权限（1年）→ 公告滚动3天
```

## 5. 核心业务规则

### 5.1 用户注册规则

| 规则 | 说明 |
|-----|------|
| 注册方式 | 仅支持手机号 + 短信验证码 |
| 用户名生成 | `YYYYMMDD` + 手机号后4位，如 `202601156826` |
| 唯一性 | 手机号唯一，同一手机号不可重复注册 |

### 5.2 支付规则

| 规则 | 说明 |
|-----|------|
| 课程定价 | 由站长设定，支持修改 |
| 支付方式 | 第三方支付（预留）或邀请码兑换 |
| 邀请码 | 站长生成，一次性使用，不计入年消费 |

### 5.3 会员规则

| 规则 | 说明 |
|-----|------|
| 触发条件 | 年消费满 2000 元（邀请码不计入） |
| 权益内容 | 全站视频下载权限 |
| 有效期 | 从达标时刻起，1 自然年 |
| 公告展示 | 新会员全站公告滚动播放 3 天 |

### 5.4 安全规则

| 规则 | 说明 |
|-----|------|
| 用户频率限制 | 注册用户每 15 秒限制一次接口调用 |
| 游客排队 | 在线游客 IP 超过 50 时，新游客需排队等待 |
| 目的 | 防止 DDoS 攻击 |

## 6. 成功标准

| 指标 | MVP 标准 | 说明 |
|-----|---------|------|
| 功能完整 | 核心流程可走通 | 注册→浏览→支付→下载 |
| 部署简单 | 单命令启动 | docker run 即可 |
| 性能达标 | 页面加载 < 2s | 静态资源优化 |
| 安全达标 | 防护机制生效 | 频率限制、排队正常 |
| 稳定运行 | 7×24 无故障 | 容器自动重启 |

## 7. 约束与假设

### 7.1 约束条件

- **预算有限**：优先使用免费/低成本方案
- **单人运维**：架构必须简单，易于维护
- **合规要求**：内容需符合法律法规
- **短信成本**：验证码短信有成本，需控制滥用

### 7.2 假设条件

- 用户具备基本的手机操作能力
- 初期流量较小，单机可承载
- 静态文件（笔记、课程包）由站长手动更新
- 第三方支付接口后续补充

## 8. 风险评估

| 风险 | 可能性 | 影响 | 应对措施 |
|-----|-------|------|---------|
| 短信验证码滥用 | 中 | 中 | 同一手机号发送频率限制 |
| 支付失败 | 中 | 高 | 邀请码备用、人工客服 |
| 下载链接泄露 | 中 | 中 | 链接有效期、下载次数限制 |
| DDoS 攻击 | 低 | 高 | 频率限制、游客排队机制 |
| 服务器宕机 | 低 | 高 | Docker 自动重启、定期备份 |

---

**文档版本**：v2.0
**创建日期**：2025-01-15
**最后更新**：2025-01-15
